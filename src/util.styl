// util
// 
// @author  firede(firede@firede.us)
// @desc    useful css helpers

@import 'setting'

// set width and height quickly
// default unit is `px`
size(_values...)
    if length(_values) == 1
        _values_unit = unit(_values) == '' ? 'px' : unit(_values)

        width: unit(_values, _values_unit)
        height: unit(_values, _values_unit)
    else
        _width_unit = unit(_values[0]) ? 'px' : unit(_values[0])
        _height_unit = unit(_values[1]) ? 'px' : unit(_values[1])

        width: unit(_values[0], _width_unit)
        height: unit(_values[1], _height_unit)


// useful in hybrid app
no-select()
    user-select: none
    -webkit-touch-callout: none


// clearfix
// @see http://h5bp.com/q
clearfix()
    &:after,
    &:before
        content: ' '
        display: table
    &:after
        clear: both


// ellipsis
// support multi line, webkit only
ellipsis(_line = 1)
    overflow: hidden
    text-overflow: ellipsis
    display: -webkit-box
    -webkit-line-clamp: _line
    -webkit-box-orient: vertical


// hide text
// @see http://goo.gl/EglZN
hide-text()
    color: transparent
    font: 0 / 0 a
    text-shadow: none

// get media query for retina devices
get-hd-query(_dppx = 1.3)
    return s('only screen and (-webkit-min-device-pixel-ratio: %s), only screen and (min-resolution: %s)', _dppx, round(unit(_dppx * 96, 'dpi')))

// media query for retina devices
$hd_query = get-hd-query()


// retina background
// @todo it's draft version
bg-hd(_path, _width = null, _height = null)
    background-image: url(_path)

    @media $hd_query
        _ext = extname(_path)
        _path = pathjoin(
            dirname(_path),
            basename(_path, _ext) + $hd_suffix + _ext
        )
        background-image: url(_path)
        if _width in (cover contain) and _height == null
            _height = null
        background-size: _width _height

